<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>garden 요소 테스트</title>
    <link rel="stylesheet" href="../static/css/test.css" />
  </head>

  <body>
    <div>
      <h3>메시지가 없습니다 ㅜㅜ</h3>
    </div>

    <div class="sky"></div>
    <div class="green"></div>
    <div class="sesac-container">
      <div class="sesac"><img src="../static/img/sesac.png" alt="새싹" /></div>
      <div class="sesac"><img src="../static/img/sesac.png" alt="새싹" /></div>
      <div class="sesac"><img src="../static/img/sesac.png" alt="새싹" /></div>
      <div class="sesac"><img src="../static/img/sesac.png" alt="새싹" /></div>
      <div class="sesac"><img src="../static/img/sesac.png" alt="새싹" /></div>
    </div>

    <script>
      function writeMsg() {
        const form = document.forms['newMsg'];

        const msg = {
          title: form.elements.title.value,
          content: form.elements.content.value,
          is_public: form.elements.isPublic.value,
          flower_color: form.elements.flowerColor.value,
        };

        axios({
          method: 'POST',
          url: '/home/garden',
          data: msg,
        }).then((res) => {
          if (res.data.result) {
            alert('메시지 작성 완료');
            location.reload();
          } else {
            alert('메시지 작성 실패 ㅜㅜ');
          }
        });
      }

      function deleteMsg() {
        const form = document.forms['mesId'];
        let mesId = form.mesId.value;
        console.log('mesId : ', mesId);
        axios({
          method: 'DELETE',
          url: '/home/garden',
          data: mesId,
        })
          .then((res) => {
            console.log('res.data', res.data);
            if (res.data.result) {
              alert('삭제되었습니다');
              location.reload();
            } else {
              location.reload();
            }
          })
          .catch((err) => {
            console.log('에러발생');
          });
      }

      // $("buttion[name=delMsg]").on("click", function () {
      //   console.log("value : ", this.value)
      // })

      function profile() {
        axios({
          method: 'GET',
          url: '/user/profile',
        }).then((res) => {
          console.log('res', res.data);
          if (res.data) location.href = '/user/profile';
          else {
            alert('마이페이지 접근 불가 ;ㅁ;');
          }
        });
      }
    </script>
  </body>
</html>
